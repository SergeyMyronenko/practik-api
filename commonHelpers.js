import{S as L,i as u,a as c}from"./assets/vendor-778245f4.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const q=document.querySelector(".js-search-form"),d=document.querySelector(".js-gallery"),f=document.querySelector(".js-backdrop");let a=1,i;const v={lines:14,length:41,width:17,radius:45,scale:1,corners:1,speed:1,rotate:24,animation:"spinner-line-fade-quick",direction:1,color:"#f01919",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},S={root:null,rootMargin:"100px",threshold:1},_=function(t,e){t.forEach(s=>{s.isIntersecting&&(e.unobserve(s.target),M())})},w=new IntersectionObserver(_,S),m=new L(v);q.addEventListener("submit",E);async function E(t){if(t.preventDefault(),i=t.target.elements["user-search-query"].value.trim(),g(),!i)return p(),d.innerHTML="",u.info({position:"topRight",message:"Error enter any symbols"});try{const{data:{results:e,total:s,total_pages:n}}=await y(i,a);d.innerHTML=h(e),u.success({position:"topRight",message:`We found ${s} photos`}),b(n)}catch{console.log("Error")}finally{p()}t.target.reset()}function g(){m.spin(f),f.classList.remove("is-hidden")}function p(){m.stop(),f.classList.add("is-hidden")}function h(t=[]){return t.map(e=>`<li class='gallery__item'>
  <img src='${e.urls.small}' alt='${e.alt_description}' class='gallery-img' />
</li>`).join("")}function y(t,e){return c.defaults.baseURL="https://api.unsplash.com",c.defaults.headers.common.Authorization="Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc",c.get("/search/photos",{params:{query:t,page:e,per_page:12,orientation:"portrait"}})}async function M(){console.log("LOAD"),a+=1,g();try{const{data:{results:t,total_pages:e}}=await y(i,a);d.insertAdjacentHTML("beforeend",h(t)),b(e)}catch(t){console.log(t)}finally{p()}}function b(t){if(a<t){const e=document.querySelector(".gallery__item:last-child");w.observe(e)}else u.info({position:"topRight",message:"We're sorry, but you've reached the end of search results."})}
//# sourceMappingURL=commonHelpers.js.map
